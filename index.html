<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>SAFARE</title>
  <style>
    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
      background-color: #ffffff;
    }
    #map-container {
      background-color: #001f3f;
      padding: 20px;
    }
    #map { height: 600px; }
    h1, h2, h3 {
      margin: 16px;
    }
    .info-card, .quiz-card {
      background-color: white;
      color: #000;
      border-radius: 8px;
      padding: 16px;
      margin: 20px auto;
      max-width: 900px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .quiz-card {
      text-align: center;
    }
    .quiz-card button {
      margin: 10px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
    .leaflet-popup-content {
      font-size: 14px;
    }
    a {
      color: black;
      text-decoration: underline;
    }
    ul {
      list-style: disc;
      padding-left: 20px;
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>
  <div id="map-container">
    <h1 style="color: white; text-align: center;">SAFARE</h1>
    <p style="color: white; text-align: center;">ì„¸ê³„ë¥¼ ì•ˆì „í•˜ê²Œ, SAFAREì™€ í•¨ê»˜</p>
    <div id="map"></div>
  </div>

  <div class="info-card">
    <h2>í˜„ êµ­ì œ ë²”ì£„ ë° ë¶„ìŸ í˜„í™©</h2>
    <ul id="news-list"><li>ë‰´ìŠ¤ ë¡œë”© ì¤‘...</li></ul>
  </div>

  <div class="info-card">
    <h2>ì£¼ìš” êµ­ê°€ ë³„ ìœ„í—˜ ìƒí™©</h2>
    <ul id="risk-list"><li>ë°ì´í„° ë¡œë”© ì¤‘...</li></ul>
  </div>

  <div class="quiz-card" id="quiz-section">
    <h3 id="quiz-question">í€´ì¦ˆê°€ ê³§ ì‹œì‘ë©ë‹ˆë‹¤!</h3>
    <button onclick="submitAnswer(true)">O</button>
    <button onclick="submitAnswer(false)">X</button>
    <p id="quiz-result"></p>
  </div>

  <script>
    var map = L.map('map').setView([20, 0], 2);
    L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {
      maxZoom: 18,
      attribution: 'Â© OpenStreetMap'
    }).addTo(map);

    var dangerCountries = [
      { name: "ë¯¸êµ­", lat: 37.0902, lng: -95.7129, info: "ì´ê¸° ì‚¬ê³  ë¹ˆë²ˆí•¨. ì‚¬ë§ì ìˆ˜ ì§€ì† ì¦ê°€ ì¤‘. ì •ë¶€ ëŒ€ì±… ì ˆì‹¤í•¨." },
      { name: "ë¸Œë¼ì§ˆ", lat: -14.2350, lng: -51.9253, info: "ê°±ë‹¨ í™œë™ í™œë°œí•¨. ì¹˜ì•ˆ ë¶ˆì•ˆì • ì‹¬ê°. ì‹œë¯¼ ì•ˆì „ ë³´ì¥ í•„ìš”í•¨." },
      { name: "ëŸ¬ì‹œì•„-ìš°í¬ë¼ì´ë‚˜", lat: 48.3794, lng: 31.1656, info: "ì „ìŸ ì¥ê¸°í™”ë¨. ë¯¼ê°„ í”¼í•´ í¬ê³  ì‚¬íšŒ ê¸°ë°˜ ë¶•ê´´ ì¤‘. êµ­ì œ í‰í™” ì¤‘ì¬ í•„ìš”í•¨." },
      { name: "ë‚¨ì•„í”„ë¦¬ì¹´ê³µí™”êµ­", lat: -30.5595, lng: 22.9375, info: "ê°•ë ¥ ë²”ì£„ ì¦ìŒ. ê°•ë„, ì‚´ì¸ ë“± ë†’ì€ ìˆ˜ì¤€. ì¹˜ì•ˆ ê°•í™”ê°€ ì‹œê¸‰í•¨." }
    ];

    dangerCountries.forEach(function(country) {
      L.marker([country.lat, country.lng])
        .addTo(map)
        .bindPopup("ğŸ“ <b>" + country.name + "</b><br>" + country.info);
    });

    const newsItems = [
      '<a href="#">ìš°í¬ë¼ì´ë‚˜ ì „ìŸ ì§€ì† ì¤‘ - ë¯¼ê°„ í”¼í•´ ì‹¬ê°</a>',
      '<a href="#">ë¸Œë¼ì§ˆ ê°±ë‹¨ í™œë™ ì¦ê°€ - ì‹œë¯¼ ë¶ˆì•ˆ ê³ ì¡°</a>',
      '<a href="#">ë©•ì‹œì½” ë§ˆì•½ ì¹´ë¥´í…” ë¶„ìŸ ê²©í™”</a>',
      '<a href="#">ë¯¸êµ­ ì´ê¸° ì‚¬ê³  ê¸‰ì¦ - ê·œì œ í•„ìš”ì„± ëŒ€ë‘</a>',
      '<a href="#">ì¸ë„ ë³´ì´ìŠ¤í”¼ì‹± í”¼í•´ì ë‹¤ìˆ˜ ë°œìƒ</a>',
      '<a href="#">ëŸ¬ì‹œì•„ í•´ì»¤ë“¤, ê¸€ë¡œë²Œ ì‚¬ì´ë²„ ê³µê²©</a>'
    ];

    const riskItems = [
      '<a href="#">ë‚˜ì´ì§€ë¦¬ì•„ í…ŒëŸ¬ ìœ„í—˜ ì§€ì†</a>',
      '<a href="#">í”„ë‘ìŠ¤ í…ŒëŸ¬ ê²½ê³„ ìˆ˜ì¤€ ê°•í™”</a>',
      '<a href="#">ë‚¨ì•„ê³µ ê°•ë ¥ ë²”ì£„ ë°œìƒë¥  ì¦ê°€</a>',
      '<a href="#">í˜¸ì£¼ ì¸ì‹ ë§¤ë§¤ ì¡°ì§ ì ë°œ</a>'
    ];

    function rotateContent(listId, items) {
      let index = 0;
      const element = document.getElementById(listId);
      setInterval(() => {
        const newList = "<li>" + items[index % items.length] + "</li>";
        element.innerHTML = newList;
        index++;
      }, 15000);
    }

    rotateContent("news-list", newsItems);
    rotateContent("risk-list", riskItems);

    const allQuestions = [
      {
        q: "ë¯¸êµ­ì€ ì´ê¸° ì‚¬ê³ ê°€ ë§ë‹¤. (O/X)", correct: true,
        correctText: "ë§ìŒ! ì´ê¸° ê·œì œ ë…¼ìŸ ì§€ì†ë¨.",
        wrongText: "í‹€ë¦¼! ì‹¤ì œë¡œ ë§¤ë…„ ìˆ˜ì²œ ëª… ì‚¬ë§í•¨.",
        explanation: "ì´ê¸° ì‚¬ê±´ì€ ë§¤ë…„ ìˆ˜ì²œ ê±´ ì´ìƒ. ì˜ˆ: ë¼ìŠ¤ë² ì´ê±°ìŠ¤ ì´ê¸° ë‚œì‚¬ ì‚¬ê±´(2017).",
        link: "https://en.wikipedia.org/wiki/2017_Las_Vegas_shooting"
      },
      {
        q: "ë¸Œë¼ì§ˆì€ ê°±ë‹¨ í™œë™ì´ ì—†ë‹¤. (O/X)", correct: false,
        correctText: "ë§ìŒ! ê°±ë‹¨ ì¡´ì¬í•¨.",
        wrongText: "í‹€ë¦¼! ê±°ëŒ€ ê°±ë‹¨ PCC ì¡´ì¬. í­ë ¥ ë¬¸ì œ ì§€ì†.",
        explanation: "PCC ë“± ì¡°ì§ì´ ë§ˆì•½ ê±°ë˜, í­ë ¥ ì£¼ë„. ë„ì‹œ ì¹˜ì•ˆ ì•…í™” ì¤‘.",
        link: "https://en.wikipedia.org/wiki/Primeiro_Comando_da_Capital"
      },
      {
        q: "ëŸ¬ì‹œì•„ì™€ ìš°í¬ë¼ì´ë‚˜ëŠ” í‰í™” í˜‘ì •ì„ ì²´ê²°í–ˆë‹¤. (O/X)", correct: false,
        correctText: "ë§ìŒ! ì „ìŸì€ ì—¬ì „íˆ ì§„í–‰ ì¤‘.",
        wrongText: "í‹€ë¦¼! í˜„ì¬ë„ ì „ìŸ ì¤‘ì´ë©° í˜‘ì • ì—†ìŒ.",
        explanation: "2022ë…„ë¶€í„° ì‹œì‘ëœ ì „ìŸ. ë¯¼ê°„ í”¼í•´ ì»¤ì§.",
        link: "https://en.wikipedia.org/wiki/Russian_invasion_of_Ukraine"
      }
    ];

    function getRandomQuestions(arr, num) {
      const shuffled = arr.slice().sort(() => 0.5 - Math.random());
      return shuffled.slice(0, num);
    }

    let quizQuestions = getRandomQuestions(allQuestions, 3);
    let current = 0;
    let score = 0;

    window.onload = () => {
      document.getElementById("quiz-question").textContent = quizQuestions[0].q;
    };

    function submitAnswer(userAnswer) {
      const result = document.getElementById("quiz-result");
      const q = quizQuestions[current];
      if (userAnswer === q.correct) {
        score++;
        result.innerHTML = q.correctText + "<br><small>" + q.explanation + "</small>";
        result.style.color = "#00cc88";
      } else {
        result.innerHTML = q.wrongText + "<br><a href='" + q.link + "' target='_blank'>ìì„¸íˆ ë³´ê¸°</a><br><small>" + q.explanation + "</small>";
        result.style.color = "#ff4444";
      }

      current++;
      if (current < quizQuestions.length) {
        setTimeout(() => {
          result.innerHTML = "";
          document.getElementById("quiz-question").textContent = quizQuestions[current].q;
        }, 2500);
      } else {
        setTimeout(() => {
          let comment = score === quizQuestions.length ? "ì™„ë²½í•´ìš”!" : score >= 2 ? "ì˜í–ˆì–´ìš”!" : "ë” ì•Œì•„ë´ìš”!";
          document.getElementById("quiz-section").innerHTML =
            `<h3>í€´ì¦ˆ ì™„ë£Œ!</h3><p>ì´ ì ìˆ˜: ${score} / ${quizQuestions.length}ì </p><p>${comment}</p>`;
        }, 3000);
      }
    }
  </script>
</body>
</html>
