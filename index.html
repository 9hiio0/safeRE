<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>SAFARE</title>
  <style>
    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
      background-color: #ffffff;
    }
    #map-container {
      background-color: #001f3f;
      padding: 20px;
    }
    #map { height: 600px; }
    h1, h2, h3 {
      margin: 16px;
    }
    .info-card, .quiz-card {
      background-color: white;
      color: #000;
      border-radius: 8px;
      padding: 16px;
      margin: 20px auto;
      max-width: 900px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      position: relative;
    }
    .quiz-card {
      text-align: center;
    }
    .quiz-card button {
      margin: 10px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
    .leaflet-popup-content {
      font-size: 14px;
    }
    a {
      color: black;
      text-decoration: underline;
    }
    .plus-button {
      position: absolute;
      top: 12px;
      right: 16px;
      font-size: 18px;
      color: #888;
      cursor: pointer;
      text-decoration: none;
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>
  <div id="map-container">
    <h1 style="color: white; text-align: center;">SAFARE</h1>
    <p style="color: white; text-align: center;">세계를 안전하게, SAFARE와 함께</p>
    <div id="map"></div>
  </div>

  <div class="info-card">
    <a href="https://news.google.com/search?q=international+conflicts+crimes" class="plus-button" target="_blank" title="전체 뉴스 보러가기">＋</a>
    <h2>현 국제 범죄 및 분쟁 현황</h2>
    <ul id="news-list"></ul>
  </div>

  <div class="info-card">
    <a href="https://news.google.com/search?q=global+crime+terror+violence" class="plus-button" target="_blank" title="전체 뉴스 보러가기">＋</a>
    <h2>주요 국가 별 위험 상황</h2>
    <ul id="risk-list"></ul>
  </div>

  <div class="quiz-card" id="quiz-section">
    <h3 id="quiz-question">퀴즈 로딩 중...</h3>
    <button onclick="submitAnswer(true)">O</button>
    <button onclick="submitAnswer(false)">X</button>
    <p id="quiz-result"></p>
  </div>

  <script>
    // 지도 초기화
    var map = L.map('map').setView([20, 0], 2);
    L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {
      maxZoom: 18,
      attribution: '© OpenStreetMap'
    }).addTo(map);

    // 38개 핀 데이터
    const pins = [
      {name:"우크라이나", lat:48.3794, lng:31.1656, info:"러시아와 전쟁 중임. 민간인 피해 큼. 국제사회 중재 실패 중."},
      {name:"멕시코", lat:23.6345, lng:-102.5528, info:"마약 카르텔 활개 침. 군과 충돌 잦음. 관광지 인근도 위험함."},
      {name:"브라질", lat:-14.2350, lng:-51.9253, info:"갱단 확장 중. 교도소 내부까지 통제 어려움. 총기범죄 증가함."},
      {name:"이란", lat:32.4279, lng:53.6880, info:"내부 시위 지속됨. 인권 탄압 심각함. 언론통제 있음."},
      {name:"아프가니스탄", lat:33.9391, lng:67.7100, info:"탈레반 정권 하 인권 박탈 중. 여성 교육 금지됨. 국제 지원 차단됨."},
      {name:"필리핀", lat:12.8797, lng:121.7740, info:"마약 단속 명목 인권 침해. 민간 사망 발생함. 국제 비판 지속됨."},
      {name:"프랑스", lat:46.2276, lng:2.2137, info:"반정부 시위 격화됨. 경찰 폭력 논란 있음. 관광객 불안 커짐."},
      {name:"인도", lat:20.5937, lng:78.9629, info:"보이스피싱, 성범죄 심각함. 대응 체계 미흡함. 외국인도 피해자 됨."},
      {name:"남아프리카공화국", lat:-30.5595, lng:22.9375, info:"강도·살인 급증 중. 야간 외출 위험함. 경찰력 부족함."},
      {name:"중국", lat:35.8617, lng:104.1954, info:"사이버 스파이 활동 활발함. 서방국가 해킹 지속. 감시 강화됨."},
      {name:"나이지리아", lat:9.0820, lng:8.6753, info:"테러 위험 지속. 갱단 활동 활발."},
      {name:"수단", lat:12.8628, lng:30.2176, info:"내전 지속, 민간인 피해 심각."},
      {name:"시리아", lat:34.8021, lng:38.9968, info:"내전 장기화. 인도주의 위기."},
      {name:"예멘", lat:15.5527, lng:48.5164, info:"내전과 기근 심각. 국제 지원 절실."},
      {name:"말리", lat:17.5707, lng:-3.9962, info:"테러 공격 빈번. 치안 불안."},
      {name:"에티오피아", lat:9.1450, lng:40.4897, info:"내전 중, 수많은 난민 발생."},
      {name:"콜롬비아", lat:4.5709, lng:-74.2973, info:"마약 관련 범죄 높음. 정부군과 반군 충돌."},
      {name:"캐나다", lat:56.1304, lng:-106.3468, info:"갱단 범죄 일부 지역 증가 중."},
      {name:"미국", lat:37.0902, lng:-95.7129, info:"총기 폭력 심각. 보이스피싱 증가."},
      {name:"러시아", lat:61.5240, lng:105.3188, info:"군사 충돌 지속. 사이버 공격 다수."},
      {name:"파키스탄", lat:30.3753, lng:69.3451, info:"테러 위협 존재. 정치 불안정."},
      {name:"방글라데시", lat:23.6850, lng:90.3563, info:"인신매매 및 강력범죄 문제."},
      {name:"이라크", lat:33.2232, lng:43.6793, info:"테러 위협 및 분쟁 잔존."},
      {name:"말레이시아", lat:4.2105, lng:101.9758, info:"갱단 범죄 보고됨."},
      {name:"태국", lat:15.8700, lng:100.9925, info:"마약 범죄와 인신매매 심각."},
      {name:"베트남", lat:14.0583, lng:108.2772, info:"보이스피싱 피해 증가."},
      {name:"인도네시아", lat:-0.7893, lng:113.9213, info:"테러 위협 존재."},
      {name:"콩고 민주 공화국", lat:-4.0383, lng:21.7587, info:"내전과 인도주의 위기."},
      {name:"모잠비크", lat:-18.6657, lng:35.5296, info:"반군 공격 빈번."},
      {name:"짐바브웨", lat:-19.0154, lng:29.1549, info:"범죄율 높음."},
      {name:"아르헨티나", lat:-38.4161, lng:-63.6167, info:"갱단 및 강도 증가."},
      {name:"스페인", lat:40.4637, lng:-3.7492, info:"마약 밀매 주요 통로."},
      {name:"이탈리아", lat:41.8719, lng:12.5674, info:"마피아 조직 활동 심각."},
      {name:"터키", lat:38.9637, lng:35.2433, info:"테러 위협 및 난민 문제."},
      {name:"사우디아라비아", lat:23.8859, lng:45.0792, info:"인권 문제 및 정치 불안."},
      {name:"이스라엘", lat:31.0461, lng:34.8516, info:"분쟁 지속."},
      {name:"레바논", lat:33.8547, lng:35.8623, info:"경제 위기와 정치 불안."},
      {name:"요르단", lat:30.5852, lng:36.2384, info:"난민 수용 부담 큼."},
      {name:"파푸아뉴기니", lat:-6.3149, lng:143.9555, info:"강력 범죄 다수."},
      {name:"뉴질랜드", lat:-40.9006, lng:174.8860, info:"갱단 활동 일부."}
    ];

    pins.forEach(p => {
      L.marker([p.lat, p.lng])
        .addTo(map)
        .bindPopup("📍 <b>" + p.name + "</b><br>" + p.info);
    });

    // 뉴스 데이터 (각 배열은 [제목, 링크])
    const newsList = [
      ["우크라 전쟁 장기화 - 평화 협상 지지부진", "https://www.bbc.com/news/world-europe-60506682"],
      ["미국 총기 사고 매년 증가 - 시민 불안", "https://edition.cnn.com/2023/06/19/us/gun-violence-united-states-data/index.html"],
      ["브라질 갱단 확산 - 범죄율 치솟음", "https://www.aljazeera.com/features/2022/5/23/brazils-prison-gangs-are-now-powerful-criminal-networks"],
      ["중국 사이버 스파이 활동 - 국제사회 우려", "https://www.reuters.com/technology/us-uk-warn-about-chinese-cyber-espionage-group-apt40-2023-07-25/"],
      ["필리핀 마약 단속 인권 침해 논란", "https://www.hrw.org/news/2023/01/31/philippines-abuses-drug-war-continue"],
      ["아프가니스탄 탈레반 정권 인권 억압", "https://news.un.org/en/story/2023/08/1139777"],
      ["프랑스 반정부 시위 격화", "https://www.theguardian.com/world/2023/jul/01/france-protests-riots-police-violence"],
      ["남아공 강력범죄 증가", "https://www.bbc.com/news/world-africa-64549684"],
      ["멕시코 마약전쟁 계속", "https://www.npr.org/2023/01/06/1147074735/mexico-drug-cartels"],
      ["이란 내부 불만 폭발", "https://www.bbc.com/news/world-middle-east-63166335"],
      ["인도 보이스피싱 증가", "https://economictimes.indiatimes.com/tech/technology/cybercrime-in-india-on-the-rise/articleshow/101709742.cms"],
      ["러-우크라 접경 포격", "https://www.aljazeera.com/news/2023/7/3/russian-border-regions-hit-by-ukraine-drones"]
    ];

    const riskList = [
      ["프랑스 반정부 시위 격화", "https://www.theguardian.com/world/2023/jul/01/france-protests-riots-police-violence"],
      ["남아공 강력범죄 증가", "https://www.bbc.com/news/world-africa-64549684"],
      ["멕시코 마약전쟁 계속", "https://www.npr.org/2023/01/06/1147074735/mexico-drug-cartels"],
      ["이란 내부 불만 폭발", "https://www.bbc.com/news/world-middle-east-63166335"],
      ["인도 보이스피싱 증가", "https://economictimes.indiatimes.com/tech/technology/cybercrime-in-india-on-the-rise/articleshow/101709742.cms"],
      ["러-우크라 접경 포격", "https://www.aljazeera.com/news/2023/7/3/russian-border-regions-hit-by-ukraine-drones"]
    ];

    function shuffle(arr) {
      return arr.slice().sort(() => Math.random() - 0.5);
    }

    function updateNews() {
      const newsEl = document.getElementById("news-list");
      newsEl.innerHTML = "";
      shuffle(newsList).slice(0, 3).forEach(([title, link]) => {
        const li = document.createElement("li");
        li.innerHTML = `<a href="${link}" target="_blank" rel="noopener noreferrer">${title}</a>`;
        newsEl.appendChild(li);
      });

      const riskEl = document.getElementById("risk-list");
      riskEl.innerHTML = "";
      shuffle(riskList).slice(0, 3).forEach(([title, link]) => {
        const li = document.createElement("li");
        li.innerHTML = `<a href="${link}" target="_blank" rel="noopener noreferrer">${title}</a>`;
        riskEl.appendChild(li);
      });
    }

    updateNews();
    setInterval(updateNews, 15000);
        // 퀴즈 문제 3개 (O/X)
    const questions = shuffle([
      {
        q: "브라질의 범죄율은 낮아졌다. (O/X)",
        correct: false,
        correctText: "오답입니다. 브라질 갱단의 범죄율은 상승 중입니다.",
        explanation: "브라질 갱단은 교도소 내부까지 확장 중이며, 총기 사용도 증가하고 있습니다.",
        link: "https://www.aljazeera.com/features/2022/5/23/brazils-prison-gangs-are-now-powerful-criminal-networks"
      },
      {
        q: "아프가니스탄은 여성 교육을 허용한다. (O/X)",
        correct: false,
        correctText: "오답입니다. 여성 교육은 제한되고 있습니다.",
        explanation: "탈레반 정권 이후 여성 교육이 금지되어 국제적으로 비난받고 있습니다.",
        link: "https://news.un.org/en/story/2023/08/1139777"
      },
      {
        q: "멕시코 마약 카르텔은 군과 충돌 중이다. (O/X)",
        correct: true,
        correctText: "정답입니다!",
        explanation: "마약 조직과 군이 충돌하며 정부의 단속이 강화되고 있습니다.",
        link: "https://www.npr.org/2023/01/06/1147074735/mexico-drug-cartels"
      }
    ]).slice(0, 3);

    let current = 0;
    let score = 0;

    function submitAnswer(userAnswer) {
      const result = document.getElementById("quiz-result");
      const q = questions[current];
      if (userAnswer === q.correct) {
        score++;
        result.innerHTML = `<b>${q.correctText}</b><br>${q.explanation}<br><a href="${q.link}" target="_blank" rel="noopener noreferrer">관련 뉴스 보기</a>`;
        result.style.color = "#00aa88";
      } else {
        result.innerHTML = `<b>오답입니다.</b><br>${q.explanation}<br><a href="${q.link}" target="_blank" rel="noopener noreferrer">관련 뉴스 보기</a>`;
        result.style.color = "#cc3333";
      }

      current++;
      if (current < questions.length) {
        setTimeout(() => {
          result.innerHTML = "";
          document.getElementById("quiz-question").textContent = questions[current].q;
        }, 3000);
      } else {
        setTimeout(() => {
          document.getElementById("quiz-section").innerHTML = `<h3>퀴즈 완료!</h3><p>점수: ${score} / ${questions.length}</p>`;
        }, 4000);
      }
    }

    // 퀴즈 첫 문제 표시
    document.getElementById("quiz-question").textContent = questions[0].q;
  </script>
</body>
</html>
